# ANST-Kit Environment Configuration
# Copy this file to .env and customize as needed.
# All values shown are defaults.

# =============================================================================
# Global Settings
# =============================================================================

# Global random seed for reproducibility
ANSTKIT_SEED=42

# Logging level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
ANSTKIT_LOG_LEVEL=INFO

# Path to PINN model weights (absolute or relative to project root)
# ANSTKIT_PINN_WEIGHTS_PATH=models/tank_pinn.pt

# =============================================================================
# API Service
# =============================================================================

# API host and port
ANSTKIT_API_HOST=0.0.0.0
ANSTKIT_API_PORT=8000

# API authentication (set REQUIRE_AUTH=true and provide API_KEY for security)
ANSTKIT_API_REQUIRE_AUTH=false
# ANSTKIT_API_API_KEY=your-secure-api-key-here

# =============================================================================
# Audit Store
# =============================================================================

# SQLite database path (use :memory: for in-memory, or a file path for persistence)
ANSTKIT_AUDIT_DB_PATH=:memory:

# Thread-local connections for multi-threaded safety
ANSTKIT_AUDIT_USE_THREAD_LOCAL=true

# =============================================================================
# Physics Simulation (Tank Dynamics)
# =============================================================================

# Tank dynamics coefficients: dH/dt = (k_in * u_pump - k_out * u_valve * sqrt(H)) / area
ANSTKIT_PHYSICS_K_IN=1.0
ANSTKIT_PHYSICS_K_OUT=0.6
ANSTKIT_PHYSICS_AREA=1.0
ANSTKIT_PHYSICS_EPS=1e-6

# Physics gate parameters
ANSTKIT_PHYSICS_HORIZON=5.0
ANSTKIT_PHYSICS_N_EVAL=64
ANSTKIT_PHYSICS_H_MAX=1.0
ANSTKIT_PHYSICS_RESIDUAL_THRESHOLD=0.005
ANSTKIT_PHYSICS_UNCERTAINTY_THRESHOLD=0.05

# =============================================================================
# PINN (Physics-Informed Neural Network)
# =============================================================================

# Network architecture
ANSTKIT_PINN_HIDDEN_DIM=64
ANSTKIT_PINN_DEPTH=3
ANSTKIT_PINN_N_ENSEMBLE=5

# Training parameters
ANSTKIT_PINN_TRAINING_STEPS=1500
ANSTKIT_PINN_LEARNING_RATE=0.0003

# =============================================================================
# Plant Topology (Demo Equipment IDs)
# =============================================================================

ANSTKIT_PLANT_TANK_ID=T1
ANSTKIT_PLANT_PUMP_ID=P1
ANSTKIT_PLANT_INLET_VALVE_ID=V1
ANSTKIT_PLANT_OUTLET_VALVE_ID=V2

# =============================================================================
# Demo Agent Behavior
# =============================================================================

# Probability of hallucinating invalid target IDs (for testing gate effectiveness)
ANSTKIT_AGENT_P_HALLUCINATE_ID=0.20

# Probability of proposing out-of-range values (for testing gate effectiveness)
ANSTKIT_AGENT_P_OUT_OF_RANGE=0.20

# =============================================================================
# Orchestrator
# =============================================================================

# Maximum propose-verify iterations before rejection
ANSTKIT_ORCHESTRATOR_MAX_ITERATIONS=3

# =============================================================================
# Policy Gate
# =============================================================================

# Maximum allowed value change per step
ANSTKIT_POLICY_MAX_DELTA=0.5

# Enforce allowlists and bounds
ANSTKIT_POLICY_ENFORCE_ACTION_ALLOWLIST=true
ANSTKIT_POLICY_ENFORCE_TARGET_ALLOWLIST=false
ANSTKIT_POLICY_ENFORCE_VALUE_BOUNDS=true

# =============================================================================
# MLflow Tracking (Optional)
# =============================================================================

# MLflow tracking URI (uncomment to enable)
# ANSTKIT_MLFLOW_TRACKING_URI=http://localhost:5000

# Experiment name
ANSTKIT_MLFLOW_EXPERIMENT_NAME=anstkit-experiments

# =============================================================================
# Docker Compose Specific (used by docker-compose.yaml)
# =============================================================================

# MLflow UI port
MLFLOW_PORT=5000
